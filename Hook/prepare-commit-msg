#!/usr/bin/env ruby
$from_branch
$msg

def merge?
	ARGV[1] == "merge"
end

def merge_msg
  $msg ||= `cat .git/MERGE_MSG`
  $from_branch = $msg[13..16]
end

merge_msg

def from_ws
	$from_branch == '\'ws\''
end

if merge? && from_ws
  puts "STOP THE MERGE!"
  puts "Merge from - #$from_branch"
  puts "Never merge from WS branch! Thanks"
  exit 1
end